{
  "entities": {
    "AdminProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Admin Profile",
      "type": "object",
      "description": "Stores profile information for an administrative user, including the gym they manage.",
      "properties": {
        "gymName": {
          "type": "string",
          "description": "The name of the gym managed by this administrator."
        },
        "ownerName": {
          "type": "string",
          "description": "The name of the gym owner."
        },
        "gymIdentifier": {
          "type": "string",
          "description": "A unique, human-readable identifier for the gym."
        },
        "gymEmail": {
          "type": "string",
          "format": "email",
          "description": "The contact email address for the gym."
        },
        "gymAddress": {
          "type": "string",
          "description": "The physical address of the gym."
        },
        "gymContactNumber": {
          "type": "string",
          "description": "The primary contact phone number for the gym."
        }
      },
      "required": [
        "gymName",
        "ownerName"
      ]
    },
    "Member": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Member",
      "type": "object",
      "description": "Represents a gym member, storing their personal details and contact information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Member entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the member."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the member."
        },
        "email": {
          "type": "string",
          "description": "The email address of the member.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The primary phone number of the member."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "The birth date of the member.",
          "format": "date"
        },
        "address": {
          "type": "string",
          "description": "The physical address of the member."
        },
        "emergencyContactName": {
          "type": "string",
          "description": "The name of the member's emergency contact."
        },
        "emergencyContactPhone": {
          "type": "string",
          "description": "The phone number of the member's emergency contact."
        },
        "joinDate": {
          "type": "string",
          "description": "The date when the member joined the gym.",
          "format": "date"
        },
        "isActive": {
          "type": "boolean",
          "description": "Indicates if the member currently has an active membership."
        },
        "gymId": {
          "type": "string",
          "description": "A unique identifier assigned to the member for public check-in purposes."
        },
        "gymName": {
          "type": "string",
          "description": "The name of the gym the member belongs to."
        },
        "membershipEndDate": {
          "type": "string",
          "format": "date",
          "description": "The expiry date of the member's current active membership."
        },
        "activePlanId": {
          "type": "string",
          "description": "The ID of the member's current active membership plan."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "phone",
        "joinDate",
        "isActive",
        "gymId",
        "gymName"
      ]
    },
    "PublicMemberProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Public Member Profile",
      "type": "object",
      "description": "A public-facing, non-sensitive subset of a member's data used for the check-in process.",
      "properties": {
        "memberDocId": {
          "type": "string",
          "description": "The document ID of the corresponding private Member document."
        },
        "gymName": {
          "type": "string",
          "description": "The name of the gym the member belongs to."
        },
        "gymIdentifier": {
          "type": "string",
          "description": "The unique identifier for the gym."
        },
        "isActive": {
          "type": "boolean",
          "description": "Indicates if the member's account is currently active."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the member."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the member."
        }
      },
      "required": [
        "memberDocId",
        "gymName",
        "gymIdentifier",
        "isActive",
        "firstName",
        "lastName"
      ]
    },
    "MembershipPlan": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MembershipPlan",
      "type": "object",
      "description": "Defines the different types of membership plans offered by the gym.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MembershipPlan entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the membership plan (e.g., 'Monthly Basic', 'Annual Premium')."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the membership plan and its features."
        },
        "price": {
          "type": "number",
          "description": "The monetary cost of the membership plan."
        },
        "durationInDays": {
          "type": "number",
          "description": "The duration of the membership plan in days."
        },
        "benefits": {
          "type": "array",
          "description": "A list of benefits included with this membership plan.",
          "items": {
            "type": "string"
          }
        },
        "isAvailable": {
          "type": "boolean",
          "description": "Indicates if the membership plan is currently available for purchase."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "price",
        "durationInDays",
        "isAvailable"
      ]
    },
    "Membership": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Membership",
      "type": "object",
      "description": "Represents an active or past subscription of a member to a specific membership plan.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Membership entity."
        },
        "memberId": {
          "type": "string",
          "description": "Reference to the Member who owns this membership. (Relationship: Member 1:N Membership)"
        },
        "planId": {
          "type": "string",
          "description": "Reference to the MembershipPlan for this membership. (Relationship: MembershipPlan 1:N Membership)"
        },
        "startDate": {
          "type": "string",
          "description": "The date when the membership became active.",
          "format": "date"
        },
        "endDate": {
          "type": "string",
          "description": "The date when the membership is set to expire.",
          "format": "date"
        },
        "status": {
          "type": "string",
          "description": "The current status of the membership (e.g., 'active', 'pending', 'expired', 'cancelled')."
        },
        "priceAtPurchase": {
          "type": "number",
          "description": "The price of the membership plan at the time of purchase."
        },
        "autoRenew": {
          "type": "boolean",
          "description": "Indicates if the membership is set to automatically renew."
        }
      },
      "required": [
        "id",
        "memberId",
        "planId",
        "startDate",
        "endDate",
        "status",
        "priceAtPurchase",
        "autoRenew"
      ]
    },
    "Trainer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Trainer",
      "type": "object",
      "description": "Stores information about the gym's trainers and their specialties.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Trainer entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the trainer."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the trainer."
        },
        "email": {
          "type": "string",
          "description": "The email address of the trainer.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The primary phone number of the trainer."
        },
        "specialization": {
          "type": "string",
          "description": "The area of fitness specialization for the trainer (e.g., 'Weightlifting', 'Cardio', 'Yoga')."
        },
        "hireDate": {
          "type": "string",
          "description": "The date when the trainer was hired.",
          "format": "date"
        },
        "bio": {
          "type": "string",
          "description": "A short biography or description of the trainer's experience."
        },
        "isActive": {
          "type": "boolean",
          "description": "Indicates if the trainer is currently employed and active."
        },
        "gymName": {
          "type": "string",
          "description": "The name of the gym the trainer belongs to."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "phone",
        "specialization",
        "hireDate",
        "isActive",
        "gymName"
      ]
    },
    "Attendance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Attendance",
      "type": "object",
      "description": "Records when a member checks into the gym.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Attendance record."
        },
        "memberId": {
          "type": "string",
          "description": "Reference to the Member who checked in."
        },
        "checkInTime": {
          "type": "string",
          "description": "The date and time the member checked in.",
          "format": "date-time"
        },
        "checkOutTime": {
          "type": "string",
          "description": "The date and time the member checked out (optional).",
          "format": "date-time"
        },
        "gymName": {
          "type": "string",
          "description": "The name of the gym where the check-in occurred."
        },
        "gymIdentifier": {
          "type": "string",
          "description": "The unique identifier for the gym."
        },
        "memberGymId": {
          "type": "string",
          "description": "The public, human-readable ID of the member who checked in."
        }
      },
      "required": [
        "id",
        "memberId",
        "checkInTime",
        "gymName",
        "gymIdentifier",
        "memberGymId"
      ]
    },
    "Invoice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Invoice",
      "type": "object",
      "description": "Represents a financial invoice generated for a member's membership or other services.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Invoice entity."
        },
        "memberId": {
          "type": "string",
          "description": "Reference to the Member associated with this invoice. (Relationship: Member 1:N Invoice)"
        },
        "membershipId": {
          "type": "string",
          "description": "Reference to the Membership instance for which this invoice was generated. (Relationship: Membership 1:N Invoice)"
        },
        "invoiceNumber": {
          "type": "string",
          "description": "A unique, human-readable invoice number."
        },
        "issueDate": {
          "type": "string",
          "description": "The date when the invoice was issued.",
          "format": "date"
        },
        "dueDate": {
          "type": "string",
          "description": "The date by which the invoice payment is due.",
          "format": "date"
        },
        "totalAmount": {
          "type": "number",
          "description": "The total monetary amount of the invoice."
        },
        "status": {
          "type": "string",
          "description": "The current status of the invoice (e.g., 'Issued', 'Paid', 'Overdue', 'Cancelled')."
        },
        "gymName": {
          "type": "string",
          "description": "The name of the gym where the invoice was issued."
        }
      },
      "required": [
        "id",
        "memberId",
        "membershipId",
        "invoiceNumber",
        "issueDate",
        "dueDate",
        "totalAmount",
        "status",
        "gymName"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Records individual payments made by members, typically against an invoice.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Payment entity."
        },
        "invoiceId": {
          "type": "string",
          "description": "Reference to the Invoice this payment is for. (Relationship: Invoice 1:N Payment)"
        },
        "memberId": {
          "type": "string",
          "description": "Reference to the Member who made the payment. (Relationship: Member 1:N Payment)"
        },
        "amount": {
          "type": "number",
          "description": "The monetary amount of the payment."
        },
        "paymentDate": {
          "type": "string",
          "description": "The date when the payment was made.",
          "format": "date-time"
        },
        "paymentMethod": {
          "type": "string",
          "description": "The method used for the payment (e.g., 'Credit Card', 'Bank Transfer', 'Cash')."
        },
        "transactionId": {
          "type": "string",
          "description": "An optional external transaction ID from a payment gateway."
        },
        "status": {
          "type": "string",
          "description": "The status of the payment (e.g., 'Paid', 'Pending', 'Failed', 'Refunded')."
        }
      },
      "required": [
        "id",
        "invoiceId",
        "memberId",
        "amount",
        "paymentDate",
        "paymentMethod",
        "status"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/roles_admin/{adminId}": {
      "schema": {
        "$ref": "#/backend/entities/AdminProfile"
      },
      "description": "Collection for storing profile data and administrative privileges for users. The document ID is the user's UID. The existence of a document grants admin rights."
    },
    "/members/{memberId}": {
      "schema": {
        "$ref": "#/backend/entities/Member"
      },
      "description": "Main collection for storing gym member profiles. Access is restricted to authenticated administrators."
    },
    "/member_profiles_public/{memberPubId}": {
      "schema": {
        "$ref": "#/backend/entities/PublicMemberProfile"
      },
      "description": "Publicly readable, non-sensitive member profiles used for the check-in process. The document ID is the member's human-readable gym ID."
    },
    "/members/{memberId}/memberships/{membershipId}": {
      "schema": {
        "$ref": "#/backend/entities/Membership"
      },
      "description": "Subcollection storing individual membership subscriptions for each gym member. Includes denormalized 'memberId' for authorization independence. Access is restricted to authenticated administrators."
    },
    "/members/{memberId}/payments/{paymentId}": {
      "schema": {
        "$ref": "#/backend/entities/Payment"
      },
      "description": "Subcollection storing records of payments made by each member. Includes denormalized 'memberId' and 'invoiceId' for authorization independence. Access is restricted to authenticated administrators."
    },
    "/attendance/{attendanceId}": {
      "schema": {
        "$ref": "#/backend/entities/Attendance"
      },
      "description": "Top-level collection for storing all gym check-in records. Access is restricted per-document based on gymName. This flat structure avoids the need for collection group queries and manual index creation."
    },
    "/invoices/{invoiceId}": {
      "schema": {
        "$ref": "#/backend/entities/Invoice"
      },
      "description": "Top-level collection for storing all invoices. Access is restricted per-document based on gymName. This flat structure avoids the need for collection group queries and manual index creation."
    },
    "/membership_plans/{planId}": {
      "schema": {
        "$ref": "#/backend/entities/MembershipPlan"
      },
      "description": "Collection for defining and managing different gym membership plans. Access is restricted to authenticated administrators."
    },
    "/trainers/{trainerId}": {
      "schema": {
        "$ref": "#/backend/entities/Trainer"
      },
      "description": "Collection for storing information about gym trainers. Access is restricted to authenticated administrators."
    }
  }
}
